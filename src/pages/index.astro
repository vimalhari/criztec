---
import Layout from '~/layouts/PageLayout.astro';

import Hero from '~/components/widgets/Hero2.astro';
import Note from '~/components/widgets/Note.astro';
import ServicesCards from '~/components/widgets/ServicesCards.astro';
import WhyChooseUs from '~/components/widgets/WhyChooseUs.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import Stats from '~/components/widgets/Stats.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Testimonials from '~/components/widgets/Testimonials.astro';

import heroVideo from '~/assets/videos/herovideo.mp4';

const metadata = {
  title: 'Criztec Technologies - Web & Software Development (Astro, Rails, Django)',
  description:
    'Criztec Technologies: UK-based web & software development specialists (Astro, Ruby on Rails, Django) helping businesses launch faster and automate operations with n8n.',
  keywords:
    'web development, software development, Astro, Ruby on Rails, Django, business automation, n8n, workflow automation, Criztec Technologies, website development, mobile app development',
  ignoreTitleTemplate: true,
  structuredData: {
    '@context': 'https://schema.org',
    '@type': 'Organization',
    name: 'Criztec Technologies',
    description: 'UK-based web & software development (Astro, Ruby on Rails, Django) and business automation (n8n)',
    url: 'https://criztec.com',
    logo: 'https://criztec.com/CriztecLogo.png',
    address: {
      '@type': 'PostalAddress',
      streetAddress: '121 Bath Road',
      addressLocality: 'Slough',
      addressRegion: 'Berkshire',
      postalCode: 'SL1 3UW',
      addressCountry: 'GB',
    },
    contactPoint: {
      '@type': 'ContactPoint',
      telephone: '+44-740-4979-307',
      contactType: 'customer service',
      availableLanguage: 'English',
    },
    sameAs: ['https://twitter.com/Criztec_IT'],
    service: [
      {
        '@type': 'Service',
        name: 'Web Development',
        description: 'Custom website development and web applications',
      },
      {
        '@type': 'Service',
        name: 'Business Automation (n8n)',
        description: 'Workflow automation and integrations using n8n to streamline operations',
      },
      {
        '@type': 'Service',
        name: 'Digital Marketing',
        description: 'SEO, PPC, and social media marketing services',
      },
      {
        '@type': 'Service',
        name: 'Mobile App Development',
        description: 'iOS and Android mobile application development',
      },
    ],
  },
  openGraph: {
    type: 'website',
    locale: 'en_GB',
    images: [
      {
        url: 'https://assets.criztec.com/hero-image.webp',
        width: 1200,
        height: 630,
        alt: 'Criztec Technologies - Web Development & Digital Marketing',
      },
    ],
  },
  twitter: {
    handle: '@Criztec_IT',
    site: '@Criztec_IT',
    cardType: 'summary_large_image',
  },
};

const url = Astro.url;
const subscribed = url.searchParams.get('subscribed') === 'true';
---

<Layout metadata={metadata}>
  <!-- Newsletter Success Toast -->
  {
    subscribed && (
      <div id="subscribe-toast" class="fixed top-4 right-4 z-50 animate-fade-in">
        <div class="bg-green-600 text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          <span class="font-medium">Thanks for subscribing! You'll receive our updates soon.</span>
          <button
            onclick="this.parentElement.parentElement.remove(); history.replaceState(null, '', '/')"
            class="ml-2 hover:opacity-80"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    )
  }

  <!-- Hero Widget ******************* -->

  <Hero
    id="hero"
    tagline="Web & Software Development • Astro • Ruby on Rails • Django"
    subtitle="A UK-based team building high-performance sites with Astro, production-ready apps with Ruby on Rails and Django, and business automation with n8n."
    actions={[
      {
        variant: 'primary',
        text: 'Get a Free Quote',
        href: '/contact',
        icon: 'tabler:arrow-right',
      },
      { variant: 'secondary', text: 'View Our Work', href: '/case-studies', icon: 'tabler:briefcase' },
    ]}
    isDark
  >
    <Fragment slot="bg">
      <video
        src={heroVideo}
        autoplay
        muted
        loop
        playsinline
        preload="metadata"
        class="absolute inset-0 w-full h-full object-cover"
        aria-hidden="true"></video>
      <div class="absolute inset-0 bg-dark/70"></div>
      <div class="absolute inset-0 bg-gradient-to-br from-primary/35 via-transparent to-primary/10"></div>
    </Fragment>

    <Fragment slot="title">
      Building <span class="text-accent dark:text-white"> Websites & Software </span> that ship faster
      <!-- <span class="hidden xl:inline">creating websites with</span>
      <span class="text-accent dark:text-white highlight"> Astro 5.0</span> + Tailwind CSS -->
    </Fragment>
  </Hero>

  <!-- Note Widget ******************* -->

  <Note />

  <!-- Services Cards Widget *************** -->

  <ServicesCards
    id="features"
    tagline="Our Services"
    title="Everything You Need to Grow Online"
    subtitle="From stunning websites to powerful automation — we deliver end-to-end digital solutions that help your business thrive."
    items={[
      {
        title: 'Websites',
        description:
          'Fast, SEO-optimized websites built with Astro or WordPress. Perfect for marketing sites, business websites, and content-driven platforms.',
        icon: 'tabler:world',
        image: {
          src: 'https://assets.criztec.com/web-development.webp',
          alt: 'Modern website design on multiple devices',
        },
        href: '/astro-site',
      },
      {
        title: 'Web & Mobile Apps',
        description:
          'Custom software built with Django or Ruby on Rails. From MVPs to enterprise applications, we deliver secure, scalable solutions.',
        icon: 'tabler:devices',
        image: {
          src: 'https://assets.criztec.com/web-apps.webp',
          alt: 'Modern code editor with syntax highlighting',
        },
        href: '/django-development',
      },
      {
        title: 'Business Automation',
        description: 'Automate workflows with n8n—save time, reduce errors, and boost visibility across your business.',
        icon: 'tabler:robot',
        image: {
          src: 'https://assets.criztec.com/business-automation.webp',
          alt: 'Automation and workflow concept',
        },
        href: '/business-automation',
      },
      {
        title: 'Digital Marketing',
        description:
          'Multi-channel marketing including SEO, content marketing, and social media management to grow your online presence.',
        icon: 'tabler:chart-arrows-vertical',
        image: {
          src: 'https://assets.criztec.com/digital-marketing-v2.webp',
          alt: 'Digital marketing growth analytics',
        },
        href: '/digital-marketing',
      },
      {
        title: 'Design',
        description: 'Professional logo design and brand identity systems that look great across digital and print.',
        icon: 'tabler:palette',
        image: {
          src: 'https://assets.criztec.com/design-services.webp',
          alt: 'Creative design workspace with color palettes',
        },
        href: '/logo-design',
      },
      {
        title: 'IT Services',
        description: 'Managed IT support including Google Workspace, Microsoft 365, security, and ongoing maintenance.',
        icon: 'tabler:server-cog',
        image: {
          src: 'https://assets.criztec.com/it-services.webp',
          alt: 'Server room with technical infrastructure',
        },
        href: '/it-support',
      },
    ]}
  />

  <!-- Stats Widget ****************** -->

  <Stats
    title="Trusted by Growing Businesses"
    subtitle="Real results from real partnerships"
    stats={[
      { title: 'Projects Delivered', amount: '75+', icon: 'tabler:briefcase' },
      { title: 'Client Success Rate', amount: '95%', icon: 'tabler:trophy' },
      { title: 'Average Growth Achieved', amount: '30%', icon: 'tabler:trending-up' },
      { title: 'Years Combined Experience', amount: '100+', icon: 'tabler:users' },
    ]}
  >
    <Fragment slot="bg">
      <div
        class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-primary/5 dark:from-primary/10 dark:to-slate-900"
      >
      </div>
    </Fragment>
  </Stats>

  <!-- Why Choose Us Widget **************** -->

  <WhyChooseUs
    tagline="Why Choose Us"
    title="Your Success Is Our Mission"
    subtitle="We're more than just a tech company — we're your strategic partner committed to driving real results."
    items={[
      {
        title: 'Connect',
        description:
          'We bridge the gap between your brand and audience with seamless technology integrations that connect systems and visions alike.',
        icon: 'tabler:plug-connected',
        color: 'primary',
      },
      {
        title: 'Create',
        description:
          'From visionary concepts to pixel-perfect execution, we craft bespoke digital experiences that elevate your brand and engage your audience.',
        icon: 'tabler:sparkles',
        color: 'blue',
      },
      {
        title: 'Catalyze',
        description:
          'We ignite your business potential with strategic insights and cutting-edge technology, propelling you toward exponential growth.',
        icon: 'tabler:rocket',
        color: 'green',
      },
    ]}
    image={{
      src: 'https://assets.criztec.com/why-choose-us.webp',
      alt: 'Team collaboration and success',
      width: 1200,
      height: 800,
    }}
  >
    <Fragment slot="bg">
      <div
        class="absolute inset-0 bg-gradient-to-br from-slate-50 via-white to-primary/5 dark:from-slate-900 dark:via-slate-900 dark:to-primary/10"
      >
      </div>
    </Fragment>
  </WhyChooseUs>

  <!-- Testimonials Widget *********** -->

  <Testimonials
    title="What Our Clients Say"
    subtitle="Don't just take our word for it — hear from businesses we've helped succeed."
    tagline="Testimonials"
    testimonials={[
      {
        testimonial:
          'Criztec delivered our new website in record time. The team was professional, responsive, and truly understood our vision. Our online presence has never been stronger.',
        name: 'Sarah Mitchell',
        job: 'Marketing Director, TechStart UK',
        image: {
          src: 'https://assets.criztec.com/photo-1494790108377-be9c29b293-aHR0cHM6.jpg',
          alt: 'Sarah Mitchell',
        },
      },
      {
        testimonial:
          'The n8n automation they set up saved us 20+ hours per week. What used to take days now happens automatically. Game-changer for our operations.',
        name: 'James Henderson',
        job: 'Operations Manager, LogiFlow',
        image: {
          src: 'https://assets.criztec.com/photo-1472099645785-5658abf4ff-aHR0cHM6.jpg',
          alt: 'James Henderson',
        },
      },
      {
        testimonial:
          'Their Ruby on Rails expertise is exceptional. They built us a robust platform that handles thousands of users daily without a hitch. Highly recommended!',
        name: 'Emma Thompson',
        job: 'CEO, EduPlatform',
        image: {
          src: 'https://assets.criztec.com/photo-1438761681033-6461ffad8d-aHR0cHM6.jpg',
          alt: 'Emma Thompson',
        },
      },
    ]}
  />

  <!-- HighlightedPosts Widget ******* -->

  <BlogLatestPosts
    title="Insights & Resources"
    information="Stay ahead with the latest trends, tips, and strategies in web development and digital marketing."
    count={6}
  />

  <!-- CallToAction Widget *********** -->

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Start Your Project',
        href: '/contact',
        icon: 'tabler:rocket',
      },
      {
        variant: 'secondary',
        text: 'Book a Free Consultation',
        href: '/contact',
        icon: 'tabler:calendar',
      },
    ]}
  >
    <Fragment slot="title"> Ready to Transform Your Business? </Fragment>

    <Fragment slot="subtitle">
      Join 75+ businesses that have accelerated their growth with our solutions. <br class="hidden md:inline" />
      Let's discuss how we can help you achieve your goals.
    </Fragment>
  </CallToAction>
</Layout>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }
</style>

<script>
  // Auto-dismiss toast after 5 seconds
  const toast = document.getElementById('subscribe-toast');
  if (toast) {
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transition = 'opacity 0.3s ease-out';
      setTimeout(() => {
        toast.remove();
        history.replaceState(null, '', '/');
      }, 300);
    }, 5000);
  }
</script>

<script>
  import { reset, run } from 'vanilla-cookieconsent';
  import { config } from '../components/common/CookieConsentConfig';

  const resetBtn = document.getElementById('reset-btn');
  const toggleThemeBtb = document.getElementById('toggle-theme-btn');

  resetBtn?.addEventListener('click', () => {
    reset(true);
    run(config);
  });

  toggleThemeBtb?.addEventListener('click', () => {
    document.body.classList.toggle('cc--elegant-black');
  });
</script>
